# Use the latest 2.1 version of CircleCI pipeline process engine. See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
# Use a package of configuration called an orb.
workflows:
  deployToVM:
    jobs:
      - deploy

jobs:
  deploy:
    docker:
      - image: circleci/buildpack-deps
    resource_class: small
    steps:
      - add_ssh_keys
      - run: |
          echo 'gableh.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDea8rG5gUWoOWhLMIZq9CTLnIwB4gCzI+LEdrAb5WHsSHWimxSKQz74ivTZ8u3yozHcfAY0yRoctlPnhs1YH0cAT7EqoA5pG9BZ9iqgLZ2FC1WpanHc3qS29/Ny8nhWZ8yIICp5W+O/99Ib4fbjM2e/W+hSQhipN0Q4SOGuw0MJwajtWRTXv9UnzqEZ6P+54no/t4I3+Kcgp/wb7DgnNbXe0ZOwXP2hNXWPbLsaCKBJ+gNegKL1tJDkKx0jiEMGIx1lOtURiFNjgXQNUC4yrMj3PMG5kczY5h/HgshBiI/7PgeCzABPSheMxAuhUVX37pW0p8Ei5kGORTQQGHjnQ6T' >> ~/.ssh/known_hosts
          ssh $VM_USER@gableh.com "cd blog && docker-compose restart"